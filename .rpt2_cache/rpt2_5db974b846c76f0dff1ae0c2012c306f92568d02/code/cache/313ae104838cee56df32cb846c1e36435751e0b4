{"code":"import { handleRequest } from '@core/controller';\r\nexport var startServer = function (requestHandler, opts) {\r\n    if (opts === void 0) { opts = {}; }\r\n    var serverUrl = \"https://\" + (opts.slug ? opts.slug : Math.floor(Math.random() * 10000) + 1) + \".PWA_SERVER_BASE\";\r\n    // Open the relay\r\n    var iframe = document.createElement('iframe');\r\n    iframe.src = serverUrl + \"/__commrelay__.html\";\r\n    iframe.name = 'commRelay';\r\n    iframe.id = 'commRelay';\r\n    iframe.style.display = 'none';\r\n    iframe.style.height = '1px';\r\n    iframe.style.width = '1px';\r\n    document.body.appendChild(iframe);\r\n    console.log(\"Server running at \" + serverUrl);\r\n    window.addEventListener('message', function (e) {\r\n        if (e.origin === serverUrl) {\r\n            handleRequest(e.data.payload, e.ports[0], requestHandler);\r\n        }\r\n    });\r\n    return {\r\n        url: serverUrl\r\n    };\r\n};\r\n","references":["/Users/ericsimons/dev/localservice/src/core/controller/index.ts"],"dts":{"name":"/Users/ericsimons/dev/localservice/packages/client-controller/index.d.ts","writeByteOrderMark":false,"text":"export declare const startServer: (requestHandler: (request: Request) => Response | Promise<Response>, opts?: {\r\n    slug?: string;\r\n}) => {\r\n    url: string;\r\n};\r\n"}}
